<!DOCTYPE html>
<html>
<head>
    <title>Study {{ deck.name }} - {{ deck.topic.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flashcards.css') }}">
</head>
<body>
    <div class="navigation-header">
        <a href="{{ url_for('get_topic_flashcards', topic_id=deck.topic_id) }}" class="back-button">‚Üê Back to Topic</a>
        <h1>{{ deck.name }}</h1>
        <div class="stats">
            <span id="cardNumber">Card 1 of {{ flashcards|length }}</span>
            <span>Score: <span id="score">0</span></span>
        </div>
    </div>

    <div id="flashcardsContainer">
        {% for flashcard in flashcards %}
        <div class="flashcard" 
             data-id="{{ flashcard.id }}"
             data-correct="{{ flashcard.correct_answer }}"
             data-incorrect="{{ flashcard.incorrect_answers }}"
             style="display: none;">
            <div class="question">
                <h2>{{ flashcard.question }}</h2>
            </div>
            <form class="answer-form">
                <!-- Answer options will be dynamically inserted here -->
            </form>
        </div>
        {% endfor %}
    </div>

    <script type="module">
        import { FlashcardManager } from '{{ url_for("static", filename="modules/FlashcardManager.js") }}';
        
        const manager = new FlashcardManager();
        manager.initialize();

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            manager.handleKeyboardNavigation(e.key);
        });
    </script>
</body>
</html>
