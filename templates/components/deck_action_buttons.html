{# Deck action buttons component with configurable options #}
{# 
   Usage: 
   {% with 
     deck=deck,                      <!-- Required for deck-specific actions -->
     show_import=true,               <!-- Show import button -->
     show_create_deck=true,          <!-- Show create deck button -->
     show_create_subdeck=false,      <!-- Show create subdeck button -->
     show_study=true,                <!-- Show study now dropdown -->
     show_stats=true,                <!-- Show stats button -->
     show_add_cards=true,            <!-- Show add cards button -->
     due_count=0                     <!-- Due count for study button -->
   %}
   {% include 'components/deck_action_buttons.html' %}
   {% endwith %}
#}

<div class="d-flex flex-wrap gap-2">
    {# Study Now dropdown - only shown when show_study=true and deck is provided #}
    {% if show_study and deck %}
    <div class="dropdown">
        <button class="btn btn-success dropdown-toggle" type="button" id="studyDropdownMenu" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-book"></i> Study Now
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="studyDropdownMenu">
            <li>
                <a class="dropdown-item due-today-item {% if due_count == 0 %}disabled{% endif %} {% if deck.count_all_flashcards() == 0 %}no-cards{% endif %}" 
                   href="{{ url_for('deck.study_deck', deck_id=deck.flashcard_deck_id, due_only='true') }}"
                   data-deck-id="{{ deck.flashcard_deck_id }}">
                    <i class="bi bi-calendar-check me-2"></i>Due Today
                    <span class="ms-auto badge bg-secondary rounded-pill due-badge">{{ due_count }}</span>
                </a>
            </li>
            <li>
                <a class="dropdown-item {% if deck.count_all_flashcards() == 0 %}no-cards{% endif %}" 
                   href="{{ url_for('deck.study_deck', deck_id=deck.flashcard_deck_id) }}"
                   data-deck-id="{{ deck.flashcard_deck_id }}">
                    <i class="bi bi-collection me-2"></i>All Cards
                    <span class="ms-auto badge bg-secondary rounded-pill">{{ deck.count_all_flashcards() }}</span>
                </a>
            </li>
        </ul>
    </div>
    {% endif %}

    {# Import Content Button - visible when show_import=true #}
    {% if show_import %}
    <button type="button" class="btn btn-outline-primary" onclick="showImportModal()">
        <i class="bi bi-file-earmark-arrow-up"></i> Import
    </button>
    {% endif %}

    {# View Stats Button - visible when show_stats=true and deck is provided #}
    {% if show_stats and deck %}
    <a href="{{ url_for('stats.view_deck_stats', deck_id=deck.flashcard_deck_id) }}" class="btn btn-outline-success">
        <i class="bi bi-graph-up"></i> View Stats
    </a>
    {% endif %}

    {# Create Empty Deck Button - visible when show_create_deck=true #}
    {% if show_create_deck %}
    <button id="createEmptyDeckBtn" class="btn btn-outline-primary">
        <i class="bi bi-plus-lg"></i> Create Empty Deck
    </button>
    {% endif %}

    {# Create Sub-deck Button - visible when show_create_subdeck=true #}
    {% if show_create_subdeck %}
    <button id="createDeckBtn" class="btn btn-primary">
        <i class="bi bi-plus-lg"></i> Create New Sub-deck
    </button>
    {% endif %}

    {# Add Cards Button - visible when show_add_cards=true and deck is provided #}
    {% if show_add_cards and deck %}
    <button class="btn btn-outline-primary add-cards-btn" data-deck-id="{{ deck.flashcard_deck_id }}">
        <i class="bi bi-plus-lg"></i> Add Cards
    </button>
    {% endif %}
</div>
